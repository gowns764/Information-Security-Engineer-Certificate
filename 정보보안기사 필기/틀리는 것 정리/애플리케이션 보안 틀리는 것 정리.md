# 틀리는 것 정리

## 3. 애플리케이션 보안

### 3.1. FTP 연결
1. **Active Mode**
   - 디폴트
   - 클라이언트에서 서버측 21번 포트로 접속하여 제어 채널을 생성하고, 데이터 채널은 서버에서 클라이언트로 접속하여 데이터를 보낸다.
   - 서버가 21번, 20번 포트를 사용한다
   - Passive Mode로의 변경은 FTP 클라이언트가 결정한다.
2. **Passive Mode**
   - 클라이언트에서 서버측 21번 포트로 접속하여 제어 채널을 생성하고, 데이터 채널도 클라이언트에서 서버로 접속하여 데이터를 보낸다.
   - 서버가 21번, 1024본 이후 포트를 사용한다.
   - Active Mode로의 변경은 FTP 클라이언트가 결정한다.

### 3.2. TFTF
- FTP의 기능을 전부 지원할 필요가 없거나 모두 지원하는 것이 비현실적인 경우를 위해 더 간단한 TFTP가 개발되었다.
- UDP 69번 포트를 사용한다.
- 소프트웨어 패키지를 읽기 전용 메모리나 디스크 없는 워크스테이션에서 설치할 때 주로 쓰인다.
- 보안에 대한 고려가 없다.

### 3.3. Bounce Attack
- FTP에서 제어 채널과 데이터 채널을 다르게 사용하고 데이터 채널을 생성할 때, 목적지를 확인하지 않는 FTP 설계의 구조적 취약점을 이용하는 공격이다.

### 3.4. 이메일 관련 프로토콜

#### 3.4.1. SMTP
- 인터넷에서 MTA 클라이언트와 서버를 규정하는 공식적인 프로토콜이다.
- 송신자와 송신자와 메일 서버 사이 그리고 두 메일 서버들 사이에서 총 두 번 사용된다.
- 암호화 기능이 없다.

#### 3.4.2. POP3
- 클라이언트 POP3 소프트웨어는 수신자 컴퓨터에 설치되고, 서버 POP3 소프트웨어는 메일 서버에 설치된다.
- 클라이언트는 TCP 110번 포트를 사용한다.

#### 3.4.3. IMAP4
- 데이터를 신뢰성 있게, 제대로 된 순서로 보내고 받을 수 있게 한다.
- TCP 143번 포트에서 IMAP4 클라이언트의 연결 요청을 대기한다.

### 3.5. 이메일 콘텐츠 보안을 위한 보안 기술
|항목|**PEM**|**PGP**|**S/MIME**|
|:-:|-|-|-|
|개발자|IETF|Phil Zimmermann|RSA Data Security Inc|
|특징|중앙화된 키 인증<br>인터넷 표준<br>구현의 어려움<br>높은 보안성<br>이론 중심<br>많이 사용되지 않음|분산화된 키 인증<br>응용 프로그램<br>구현의 용이성<br>일반 용도의 보안성<be>실세계 사용 중심<br>현재 많이 사용|MIME 기반<br>다양한 상용 툴킷<br>X.509 인증서 지원|

### 3.6. HTTP 메소드
- **GET**
  - 일반적인 HTTP Request 형태로 웹 브라우저에 요청 데이터에 대한 인수를 URL을 통해 전송한다.
- **POST**
  - 클라이언트에서 웹서버로 데이터를 전송항 때 사용하는 방법으로, 웹서버가 처리할 수 있는 자료를 전달할 때 사용한다.
- **PUT**
  - 헤더 및 몸체를 포함하여, 몸체에 콘텐츠 내용을 덧붙여 원격지 서버에 지정한 콘텐츠를 저장하기 위한 목적으로 사용한다.
  - 그러나, 이를 악용하여 홈페이지 변조에 사용한다.

### 3.7. OWASP TOP 10
1. **Injection** (인젝션)
2. **Broken Authentication** (취약한 인증)
3. **Sensitive Data Exposure** (민감 정보 유출)
4. **XXE** (XML 외부 개체)
5. **Broken Access Control** (취약한 접근 통제)
6. **Security Misconfiguration** (보안 설정 오류)
7. **XSS** (크로스 사이트 스크립팅)
8. **Insecure Deserialization** (불안전한 역직렬화)
9. **Using Components with Known Vulnerabilities** (잘 알려진 취약점이 있는 컴포넌트 사용)
10. **Insufficient Logging & Monitoring** (불충분한 로깅과 모니터링)

### 3.8. 주요 웹 보안 위협 및 대응책

#### 3.8.1. SQL Injection
- DB와 연동된 웹 응용프로그램에서 입력된 데이터에 대한 유효성 검증을 하지 않을 경우, 공격자가 입력 폼 및 URL 입력란에 SQL문을 삽입하여 DB로부터 정보를 열람하거나 조작할 수 있는 보안 약점이다.

- 대응 방법
  - 개발 단계에서부터 모든 입력 값에 대해 적절한 검증 절차를 설계하고 구현해야 한다.
  - SQL 서버의 에러 메시지를 표시하지 않는다.
  - 애플리케이션에서 DB 연결을 통해 데이터를 처리하는 경우, 최소 권한이 설정된 계정을 사용해야 한다.
  - 외부 입력 값이 삽입되는 SQL 쿼리문을 동적으로 생성해서 실행하지 않도록 해야 한다.
  - 선처리 질의문을 이용한다.

#### 3.8.2. XSS (사이트 간 스크립팅)
- 웹 애플리케이션에서 사용자 입력 값에 대한 필터링이 제대로 이루어지지 않을 경우, 공격자가 입력이 가능한 폼에 악의적인 스크립트를 삽입, 해당 스크립트가 희생자 측에서 동작하도록 하여 악의적인 행위를 수행하는 공격 방법이다.
- 공격자는 취약점을 이용하여 사용자의 개인정보 및 쿠키 정보 탕취, 악성코드 감염, 웹 페이지 변조 등의 공격을 수행한다.
- 클라이언트 컴퓨터를 공격한다.

- 보안 대책
  - 사용자가 입력한 문자열의 특수문자를 변환 함수나 메소드로 치환한다.
  - 사용자 입력 값에 대한 검증은 반드시 서버단에서 해야 한다.
  - HTML 태그의 리스트를 선정한 후, 해당 태그만 허용하는 방식을 적용한다.

#### 3.8.3. XSRF (사이트 간 요청 위조)
- 웹 애플리케이션에서 정상적인 경로를 통한 요청과 비정상적인 경로를 통한 요청을 서버가 구분하지 못할 경우, 공격자가 스크립트 구문을 이용하여 정상적인 사용자로 하여금 조작된 요청을 전송 하도록 하여 여러 문제가 발생할 수 있는 취약점이다.
- 웹 응용프로그램에 요청을 전달할 경우, 해당 요청의 적법성을 입증하기 위하여 전달되는 값이 고정되어 있고 이러한 자료가 GET 방식으로 전달된다면 공격자가 이를 쉽게 알아내어 원하는 요청을 보냄으로써 위험한 작업을 요청할 수 있게 된다.
- 사용자가 악성 스크립트를 서버에 요청한다.

- 보안 대책
  - 입력 화면 폼 작성 시 POST 방식을 사용하고 입력 화면 폼과 해당 입력을 처리하는 프로그램 사이에 토큰을 사용하여 공격자의 직접적인 URL 사용이 동작하지 않도록 처리한다.

### 3.9. SET (Secure Electronic Transaction)
- 비자와 마스터카드가 합동으로 개발하였다.
- 인터넷상에서 신용카드를 이용한 상품 구매 시 안전한 대금 결제 과정 처리를 위해 RSA 암호화와 인증 기술을 이용한다.
- 네트워크상에서 민감한 개인금융정보를 안전하게 전송하기 위해 개발된 프로토콜이다.
- 전자봉투와 이중서명을 사용한다.

### 3.10. 이중서명 프로토콜
- 카드 사용자가 구매 정보와 지불 정보를 각각 해시한 후, 두 해시 값을 합한 뒤 다시 해시하고, 최종 해시 값을 카드 사용자의 개인키로 암호화한다.
- 이중서명의 목적은 상점이 카드 사용자의 계좌번호와 같은 지불 정보를 모르게 하는 동시에 상점에 대금을 지불하는 은행은 카드 사용자가 상점에서 산 물건을 모르지만 상점이 요구한 결제 대금이 정확한지 확인할 수 있게 하는 것이다.

### 3.11. SET의 장담점
1. 장점
   - 전자 거래의 사기를 방지한다.
   - 기존의 신용카드 기반을 그대로 활용한다.
   - SSL의 단점을 해결한다.
2. 단점
   - 암호 프로토콜이 복잡하다.
   - RSA 동작은 프로토콜의 속도를 크게 저하시킨다.
   - 카드 소지자에게 전자지갑 소프트웨어를 요구한다.
   - 상점에 소프트웨어를 요구한다.
   - 지불 게이트웨이에 거래를 전자적으로 처리하기 위한 별도의 하드웨어와 소프트웨어를 요구한다.

### 3.12. 포렌식의 기본 원칙
1. **정당성의 원칙**
   - 모든 증거는 적법한 절차를 거쳐서 획득한 것이어야 한다.
2. **재현의 원칙**
   - 증거는 어떤 절차를 통해 정제되는 과정을 거칠 수 있다.
3. **신속성의 원칙**
   - 컴퓨터 내부의 정보는 휘발성을 가진 것이 많기 때문에 신속하게 이루어저야 한다.
4. **연계 보관성의 원칙**
   - 증거는 획득되고 난 뒤 이송/분석/보관/법정 제출이라는 일련의 과정이 명확해야 하며, 이러한 과정에 대한 추적이 가능해야 한다.
5. **무결성의 원칙**
   - 수집된 정보는 연계 보관성을 만족시켜야 하고, 각 단계를 거치는 과정에서 위조 및 변조되어서는 안 되며, 이러한 사항을 매번 확인해야 한다.